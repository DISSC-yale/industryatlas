(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{39547:(e,t,r)=>{Promise.resolve().then(r.bind(r,70003))},70003:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ex});var a=r(95155),n=r(29839),o=r(38309),s=r(22548),i=r(12115),l=r(71803),c=r(3127),d=r(54688),u=r(54581),h=r(41218),x=r(65221),f=r(16632),y=r(73731),m=r(48459),p=r(96490),g=r(68534),b=r(16652),j=r(14426),A=r(700),v=r(26803),w=r(43846),k=r(88542),C=r(26152),E=r(45777),S=r(38346),_=r(20516),M=r(26682),z=r(81197);let L={10:"Total",11:"Agriculture, Forestry, Fishing and Hunting",21:"Mining, Quarrying, and Oil and Gas Extraction",22:"Utilities",23:"Construction",31:"Manufacturing",42:"Wholesale Trade",44:"Retail Trade",48:"Transportation and Warehousing",51:"Information",52:"Finance and Insurance",53:"Real Estate and Rental and Leasing",54:"Professional, Scientific, and Technical Services",55:"Management of Companies and Enterprises",56:"Administrative and Support and Waste Management and Remediation Services",61:"Educational Services",62:"Health Care and Social Assistance",71:"Arts, Entertainment, and Recreation",72:"Accommodation and Food Services",81:"Other Services",92:"Public Administration"},D={zoom:1.5,center:[-96,38]};function R(e){let{view:t,selection:r,map:n}=e,{mode:o}=(0,d.Ut)(),s=(0,i.useRef)(null);(0,i.useEffect)(()=>{(0,v.Y)([C.a,E.a,S.a,k.a,z.a,_.a])},[]),(0,i.useEffect)(()=>{if(n){let e=s.current?(0,w.Ts)(s.current,o,{renderer:"canvas"}):null;(0,M.ZB)("counties")||(0,M.mz)("counties",n.shapes);let t=()=>e&&e.resize();return window.addEventListener("resize",t),e&&e.on("georoam",t=>{"totalZoom"in t?D.zoom=t.totalZoom:D.center=e.getOption().series[0].center}),()=>{e&&e.dispose(),window.removeEventListener("resize",t)}}},[o,n]);let l=t.sector in L?L[t.sector]:t.sector;return(0,i.useEffect)(()=>{if(s.current){let e=(0,w.FP)(s.current);if(e&&n&&r.length){let a="dark"===o?{bg:"#121212",text:"#ffffff"}:{bg:"#ffffff",text:"#000000"};e.setOption({backgroundColor:a.bg,title:{text:"".concat(l," Employment in ").concat(t.year),textStyle:{textBorderColor:a.bg,textBorderWidth:2}},tooltip:{trigger:"item",textStyle:{color:a.text},backgroundColor:a.bg,borderWidth:0,formatter:e=>{let{marker:r,name:a,data:n}=e;return"<div>"+r+n.label+" ("+a+"), "+t.year+"<table><thead><tr><td><u>Sector</u></td><td><u>Employed</u></td></tr></thead>"+"<tbody><tr><td>".concat(l,"</td><td><strong>").concat(n.value,"</strong></td></tr>")+(n.sectors?n.sectors.filter((e,t)=>e.label!==l&&t<6).map(e=>"<tr><td>".concat(e.label,"</td><td>").concat(e.value,"</td></tr>")).join(""):"")+"</tbody></table></div>"}},visualMap:{calculable:!0,max:function(e,t){if(!t.length)return 0;let r=.07*(t.length-1),a=r%1,n=Math.ceil(r);return t[Math.floor(r)].value*a+t[n].value*(1-a)}(0,r),inRange:{color:["#051E3A","#073D6C","#185D8D","#29738D","#388284","#49917A","#5EA56F","#86C168","#C3DD91","#EEEEC5"]},right:0},series:[{type:"map",roam:!0,map:"counties",nameProperty:"geoid",data:r,zoom:D.zoom,center:D.center,itemStyle:{areaColor:"#8f8f8f"}}],toolbox:{feature:{myReset:{title:"reset view",icon:"path://M-2.7513 -7.5L-5.9524 -4.2989L-2.6984 -1.045M-5.8466 -4.2989L5.9524 -4.2989L5.9524 7.5L-5.8466 7.5L-5.8466 0.6217",onclick:()=>{D.zoom=1.5,D.center=[-98,38],e.setOption({series:[{zoom:D.zoom,center:D.center}]})}},saveAsImage:{name:"industryatlas_".concat(t.sector,"_").concat(t.year,"_").concat(es)}}}},!0,!0)}}},[r,n,o,l,t]),(0,a.jsx)(u.A,{ref:s,sx:{width:"100%",height:"100%",minHeight:"10px"}})}var I=r(69242),O=r(56278),F=r(54492),P=r(99927),T=r(6874),W=r.n(T);function B(){let[e,t]=(0,i.useState)(!1),r=()=>t(!e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{onClick:r,variant:"outlined",size:"large",children:"About"}),e&&(0,a.jsxs)(O.A,{open:e,onClose:r,children:[(0,a.jsx)(F.A,{children:"About"}),(0,a.jsx)(c.A,{"aria-label":"close about dialog",onClick:r,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,a.jsx)(I.A,{})}),(0,a.jsx)(P.A,{children:(0,a.jsxs)(l.A,{spacing:1,children:[(0,a.jsxs)(A.A,{children:["This site is a rework of"," ",(0,a.jsx)(W(),{href:"https://github.com/kenny101/industryatlas",rel:"noreferrer",target:"_blank",children:"industryatlas.org"}),"."]}),(0,a.jsxs)(A.A,{children:["It is built around the same"," ",(0,a.jsx)(W(),{href:"https://www.fpeckert.me/cbp/",rel:"noreferrer",target:"_blank",children:"County Business Patterns Database"})," ","as of ",es,", which was created as part of the"," ",(0,a.jsx)(W(),{href:"https://www.nber.org/papers/w26632",rel:"noreferrer",target:"_blank",children:"Imputing Missing Values in the US Census Bureau's County Business Patterns"})," ","paper."]}),(0,a.jsxs)(A.A,{children:["It was made by the Yale"," ",(0,a.jsx)(W(),{href:"https://dissc.yale.edu/",rel:"noreferrer",target:"_blank",children:"Data Intensive Social Science Center"}),"."]}),(0,a.jsxs)(A.A,{children:["View its source at"," ",(0,a.jsx)(W(),{href:"https://github.com/dissc-yale/industryatlas",rel:"noreferrer",target:"_blank",children:"dissc-yale/industryatlas"}),"."]})]})})]})]})}var U=r(79543),H=r(7756),N=r(13909),G=r(78321),Y=r(86731),Z=r(40117),V=r(96253),q=r(4915),Q=r(90835),J=r(71977);function K(e){let{view:t,sectors:r,selection:n}=e,[o,s]=(0,i.useState)(!1),d=()=>s(!o),[u,h]=(0,i.useState)(!1),x="industryatlas".concat(u?"":"10"===t.sector?"_total":"_"+t.sector,"_").concat(t.year,"_v").concat(es,".csv");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{onClick:d,variant:"outlined",size:"large",children:"Download"}),o&&(0,a.jsxs)(O.A,{open:o,onClose:d,children:[(0,a.jsx)(F.A,{children:"Export"}),(0,a.jsx)(c.A,{"aria-label":"close download dialog",onClick:d,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,a.jsx)(I.A,{})}),(0,a.jsx)(P.A,{children:(0,a.jsxs)(l.A,{spacing:1,children:[(0,a.jsx)(q.A,{sx:{float:"right"},label:"Include all sectors",labelPlacement:"start",control:(0,a.jsx)(Q.A,{checked:u,onChange:()=>h(!u)})}),(0,a.jsxs)(A.A,{children:["File (",n.length," x ",u?r.length+1:2,"): ",(0,a.jsx)("code",{children:x})]})]})}),(0,a.jsx)(J.A,{children:(0,a.jsx)(g.A,{variant:"contained",onClick:()=>{let e=document.createElement("a");document.body.appendChild(e),e.rel="noreferrer",e.target="_blank",e.download=x,e.href=URL.createObjectURL(new Blob(u?["county,"+r.join(",")+"\n"+n.map(e=>'"'+e.name+'",'+e.sectors.map(e=>null===e?"NA":e).join(",")).join("\n")]:["county,employed\n"+n.map(e=>'"'+e.name+'",'+e.value).join("\n")],{type:"text/csv; charset=utf-8"})),setTimeout(function(){e.dispatchEvent(new MouseEvent("click")),URL.revokeObjectURL.bind(null,e.href),document.body.removeChild(e)},0)},children:"Download"})})]})]})}var X=r(42047),$=r(4710),ee=r(74794),et=r(46008),er=r(39978);function ea(e){let{view:t,selection:r,data:n}=e,{mode:o}=(0,d.Ut)(),s=(0,i.useRef)(null);(0,i.useEffect)(()=>{(0,v.Y)([ee.a,et.a,er.a,C.a,E.a,$.a,z.a])},[]),(0,i.useEffect)(()=>{let e=s.current?(0,w.Ts)(s.current,o,{renderer:"canvas"}):null,t=()=>e&&e.resize();return window.addEventListener("resize",t),()=>{e&&e.dispose(),window.removeEventListener("resize",t)}},[o]);let l=t.sector in L?L[t.sector]:t.sector;return(0,i.useEffect)(()=>{if(s.current){let e=(0,w.FP)(s.current);if(e&&n.year.length){let a="dark"===o?{bg:"#121212",text:"#ffffff"}:{bg:"#ffffff",text:"#000000"},s=r.filter((e,t)=>"year"!==e.label&&t<21);e.setOption({darkMode:"dark"===o,backgroundColor:a.bg,title:{text:"Top ".concat(20," Counties in Sector ").concat(t.sector),textStyle:{textBorderColor:a.bg,textBorderWidth:2}},tooltip:{trigger:"axis",textStyle:{color:a.text},backgroundColor:a.bg,borderWidth:0},visualMap:{calculable:!0,max:Math.max(...s.map(e=>e.value)),inRange:{color:["#051E3A","#073D6C","#185D8D","#29738D","#388284","#49917A","#5EA56F","#86C168","#C3DD91","#EEEEC5"]},right:0,orient:"horizontal"},grid:{top:40,right:30,bottom:70,left:70},xAxis:{type:"category",data:n.year},yAxis:{type:"value"},series:s.map(e=>({type:"line",symbolSize:10,itemStyle:{opacity:1},lineStyle:{width:1,opacity:1},emphasis:{focus:"series",lineStyle:{width:5,opacity:1}},name:e.label,id:e.name,data:n[e.name]})),toolbox:{feature:{saveAsImage:{name:"industryatlas_counties_".concat(t.sector,"_").concat(t.year,"_").concat(es)}}}},!0,!0)}}},[o,l,t,r,n]),(0,a.jsx)(u.A,{ref:s,sx:{width:"100%",height:"100%",minHeight:"10px"}})}var en=r(66205);function eo(e){let{view:t,data:r}=e,{mode:n}=(0,d.Ut)(),o=(0,i.useRef)(null);(0,i.useEffect)(()=>{(0,v.Y)([ee.a,et.a,er.a,C.a,E.a,z.a,en.a])},[]),(0,i.useEffect)(()=>{let e=o.current?(0,w.Ts)(o.current,n,{renderer:"canvas"}):null,t=()=>e&&e.resize();return window.addEventListener("resize",t),()=>{e&&e.dispose(),window.removeEventListener("resize",t)}},[n]);let s=t.sector in L?L[t.sector]:t.sector;return(0,i.useEffect)(()=>{if(o.current){let e=(0,w.FP)(o.current);if(e&&r.sector.length){let a="dark"===n?{bg:"#121212",text:"#ffffff"}:{bg:"#ffffff",text:"#000000"},o=r.sector.map(()=>0);Object.keys(r).forEach(e=>{"sector"!==e&&r[e].forEach((e,t)=>{e&&(o[t]+=e)})});let s=r.sector.map((e,t)=>({name:e,value:o[t]})).filter(e=>"10"!==e.name).sort(ec);e.setOption({darkMode:"dark"===n,backgroundColor:a.bg,title:{text:"Sector Totals in ".concat(t.year),textStyle:{textBorderColor:a.bg,textBorderWidth:2}},tooltip:{trigger:"axis",textStyle:{color:a.text},backgroundColor:a.bg,borderWidth:0,formatter:e=>{let{value:t,name:r,marker:a}=e[0],n=L[r];return"<div>(".concat(r,") ").concat(n,"<br>").concat(a,"<strong>").concat(t,"</strong></div>")}},grid:{top:40,right:30,bottom:70,left:70},xAxis:{type:"category",data:s.map(e=>e.name),name:"Sectors",nameLocation:"center",nameGap:40},yAxis:{type:"value",max:"dataMax"},series:[{type:"bar",color:"#286dc0",data:s}],toolbox:{feature:{saveAsImage:{name:"industryatlas_sectors_".concat(t.sector,"_").concat(t.year,"_").concat(es)}}}},!0,!0)}}},[n,s,t,r]),(0,a.jsx)(u.A,{ref:o,sx:{width:"100%",height:"100%",minHeight:"10px"}})}let es="2025-04",ei={year:2016,sector:"10"},el={by_sector:{},by_year:{}};function ec(e,t){return t.value-e.value}function ed(e){let{count:t,page:r,onPageChange:n}=e,o=Math.ceil(t/100)-1,s=0===r,i=r===o;return(0,a.jsxs)(l.A,{direction:"row",children:[(0,a.jsx)(c.A,{"aria-label":"Go to first page",disabled:s,onClick:e=>n(e,0),children:(0,a.jsx)(U.A,{})}),(0,a.jsx)(c.A,{"aria-label":"Go to previous page",disabled:s,onClick:e=>n(e,r-1),children:(0,a.jsx)(H.A,{})}),(0,a.jsx)(c.A,{"aria-label":"Go to next page",disabled:i,onClick:e=>n(e,r+1),children:(0,a.jsx)(N.A,{})}),(0,a.jsx)(c.A,{"aria-label":"Go to last page",disabled:i,onClick:e=>n(e,o),children:(0,a.jsx)(G.A,{})})]})}function eu(){let{mode:e,setMode:t}=(0,d.Ut)(),[r,n]=(0,i.useState)({sector:[]}),[o,s]=(0,i.useState)({year:[]}),v=(0,i.useMemo)(()=>{let e={...ei},t=window.location.search;return t&&t.substring(1).split("&").forEach(t=>{let r=t.split("=");r[0]in e&&(e[r[0]]="year"===r[0]?+r[1]:r[1])}),e},[]),[w,k]=(0,i.useState)(v),C=e=>{let t={...w,[e.key]:e.value},r=[];t.year!==ei.year&&r.push("year="+t.year),t.sector!==ei.sector&&r.push("sector="+t.sector),requestAnimationFrame(()=>window.history.replaceState(void 0,"","?"+r.join("&"))),k(t)},[E,S]=(0,i.useState)(null);(0,i.useEffect)(()=>{fetch("counties_2010.geojson").then(async e=>{let t=await e.json(),r={};t.features.forEach(e=>{r[e.properties.geoid]=e.properties}),S({shapes:t,info:r})})},[]);let _=(0,i.useMemo)(()=>{let e=r.sector,t=r.sector.findIndex(e=>e===w.sector),a=[];return Object.keys(r).forEach((n,o)=>{"sector"!==n&&a.push({name:n,label:E&&n in E.info?E.info[n].region_name:n,value:r[n][t],index:o,sectors:r[n].map((t,r)=>({label:e[r]in L?L[e[r]]:e[r],value:t})).sort(ec)})}),a.sort(ec)},[r,w.sector,E]);(0,i.useEffect)(()=>{w.year>=1975&&w.year<=2018&&(w.year in el.by_year?n(el.by_year[w.year]):fetch("data/by_year/"+w.year+".json").then(async e=>{el.by_year[w.year]=await e.json(),n(el.by_year[w.year])}))},[w.year]),(0,i.useEffect)(()=>{w.sector in el.by_sector?s(el.by_sector[w.sector]):fetch("data/by_sector/"+w.sector+".json").then(async e=>{el.by_sector[w.sector]=await e.json(),s(el.by_sector[w.sector])})},[w.sector]);let M=(0,i.useMemo)(()=>r.sector.map(e=>({id:e,label:e in L?"".concat(e===ei.sector?"":"("+e+") ").concat(L[e]):e})),[r.sector]),z=(0,i.useMemo)(()=>[Math.min(...o.year),Math.max(...o.year)],[o.year]),D="dark"===e;return E?(0,a.jsx)(u.A,{sx:{position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"hidden"},children:(0,a.jsxs)(l.A,{direction:"row",sx:{height:"100%"},children:[(0,a.jsxs)(h.A,{sx:{width:"350px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,a.jsx)(Y.A,{sx:{position:"absolute",height:"2.7em",width:"2.7em",p:1}}),(0,a.jsx)(x.A,{title:"Industry Atlas",sx:{pl:8,"& .MuiCardHeader-title":{fontFamily:"monospace"}}}),(0,a.jsx)(f.A,{sx:{height:"100%",overflow:"hidden"},children:(0,a.jsxs)(l.A,{spacing:2,sx:{height:"100%"},children:[(0,a.jsxs)(l.A,{direction:"row",children:[(0,a.jsx)(c.A,{onClick:()=>C({key:"year",value:z[0]}),disabled:w.year===z[0],"aria-label":"jump to first year",children:(0,a.jsx)(U.A,{})}),(0,a.jsx)(c.A,{onClick:()=>{w.year>z[0]&&C({key:"year",value:w.year-1})},disabled:w.year===z[0],"aria-label":"go to previous year",children:(0,a.jsx)(H.A,{})}),(0,a.jsx)(y.A,{sx:{mr:1,ml:1},value:w.year,label:"Year",onChange:e=>C({key:"year",value:+e.target.value}),size:"small",type:"number",slotProps:{htmlInput:{min:1975,max:2016,step:1}},fullWidth:!0,children:w.year}),(0,a.jsx)(c.A,{onClick:()=>{w.year<z[1]&&C({key:"year",value:w.year+1})},disabled:w.year===z[1],"aria-label":"go to next year",children:(0,a.jsx)(N.A,{})}),(0,a.jsx)(c.A,{onClick:()=>C({key:"year",value:z[1]}),disabled:w.year===z[1],"aria-label":"jump to first year",children:(0,a.jsx)(G.A,{})})]}),(0,a.jsx)(m.A,{size:"small",fullWidth:!0,options:M,value:M.find(e=>e.id===w.sector)||{id:"",label:""},onChange:(e,t)=>C({key:"sector",value:t.id||ei.sector}),renderInput:e=>(0,a.jsx)(y.A,{...e,label:"Sector"}),disableClearable:!0}),(0,a.jsx)(X.z,{sx:{minHeight:"140px"},getRowId:e=>e.name,columns:[{field:"label",headerName:"County",width:201},{field:"value",headerName:"Employed",width:90,align:"right"}],rows:_,pageSizeOptions:[50],initialState:{pagination:{paginationModel:{pageSize:50}}},slotProps:{pagination:{ActionsComponent:ed}},density:"compact",disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0})]})}),(0,a.jsxs)(p.A,{sx:{justifyContent:"space-around"},children:[(0,a.jsx)(c.A,{color:"inherit",onClick:()=>t(D?"light":"dark"),"aria-label":"toggle dark mode",children:D?(0,a.jsx)(Z.A,{}):(0,a.jsx)(V.A,{})}),(0,a.jsx)(g.A,{variant:"text",color:"warning",onClick:()=>k(ei),children:"Reset"}),(0,a.jsx)(B,{}),(0,a.jsx)(K,{view:w,sectors:r.sector,selection:_})]})]}),(0,a.jsx)(l.A,{children:(0,a.jsx)(u.A,{sx:{position:"absolute",top:0,right:0,bottom:0,left:"350px"},children:(0,a.jsxs)(l.A,{sx:{height:"100%"},children:[(0,a.jsx)(R,{view:w,selection:_,map:E}),(0,a.jsxs)(l.A,{sx:{height:"40%"},direction:"row",children:[(0,a.jsx)(ea,{view:w,selection:_,data:o}),(0,a.jsx)(eo,{view:w,data:r})]})]})})})]})}):(0,a.jsx)(b.A,{open:!0,children:(0,a.jsxs)(l.A,{children:[(0,a.jsx)(j.A,{sx:{m:"auto"}}),(0,a.jsx)(A.A,{children:"Loading Map..."})]})})}let eh=(0,n.A)({colorSchemes:{dark:{palette:{mode:"dark",primary:{main:"#a5cdff"},secondary:{main:"#68abff"}}},light:{palette:{mode:"light",primary:{main:"#00356b"},secondary:{main:"#286dc0"},warning:{main:"#b75f00"}}}}});function ex(){return(0,a.jsx)(i.StrictMode,{children:(0,a.jsxs)(o.A,{theme:eh,defaultMode:"dark",noSsr:!0,children:[(0,a.jsx)("div",{suppressHydrationWarning:!0,children:(0,a.jsx)(s.Ay,{enableColorScheme:!0})}),(0,a.jsx)(eu,{})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[545,441,684,358],()=>t(39547)),_N_E=e.O()}]);